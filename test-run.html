<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>mcp-stress â€” find-ceiling</title>
<script src="https://cdn.plot.ly/plotly-3.3.1.min.js"></script>
<style>
  :root {
    --bg: #0d1117; --bg-card: #161b22; --bg-insight: #1c2128; --bg-anomaly: #2d1b1b;
    --border: #21262d; --grid: #21262d; --zeroline: #30363d;
    --text: #c9d1d9; --text-heading: #f0f6fc; --text-muted: #8b949e; --text-faint: #6e7681; --text-dimmed: #484f58;
    --accent: #58a6ff; --green: #3fb950; --yellow: #d29922; --red: #da3633; --purple: #bc8cff;
    --repro-bg: #161b22; --repro-text: #3fb950;
  }
  [data-theme="light"] {
    --bg: #ffffff; --bg-card: #f6f8fa; --bg-insight: #f0f4f8; --bg-anomaly: #fff0f0;
    --border: #d0d7de; --grid: #e8eaed; --zeroline: #d0d7de;
    --text: #1f2328; --text-heading: #1f2328; --text-muted: #59636e; --text-faint: #8b949e; --text-dimmed: #8b949e;
    --accent: #0969da; --green: #1a7f37; --yellow: #9a6700; --red: #d1242f; --purple: #8250df;
    --repro-bg: #f6f8fa; --repro-text: #1a7f37;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, monospace; background: var(--bg); color: var(--text); transition: background 0.2s, color 0.2s; }
  a { color: var(--accent); }
  .header { padding: 20px 32px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
  .header-left h1 { font-size: 20px; font-weight: 600; }
  .header-left .meta { font-size: 13px; color: var(--text-muted); margin-top: 4px; }
  .theme-toggle { background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; padding: 6px 12px;
                   cursor: pointer; font-size: 13px; color: var(--text-muted); transition: all 0.2s; }
  .theme-toggle:hover { border-color: var(--accent); color: var(--text); }
  .stats { display: flex; gap: 32px; padding: 16px 32px; border-bottom: 1px solid var(--border); flex-wrap: wrap; }
  .stat { text-align: center; min-width: 80px; }
  .stat .value { font-size: 28px; font-weight: 700; color: var(--accent); }
  .stat .value.warn { color: var(--yellow); }
  .stat .value.bad { color: var(--red); }
  .stat .label { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }
  .section { padding: 16px 32px; border-bottom: 1px solid var(--border); }
  .section h2 { font-size: 14px; font-weight: 600; margin-bottom: 8px; color: var(--text-heading); }
  .section p, .section li { font-size: 13px; color: var(--text-muted); line-height: 1.6; }
  .section ul { margin-left: 20px; }
  .params { display: grid; grid-template-columns: auto 1fr; gap: 2px 16px; font-size: 13px; }
  .params dt { color: var(--text-muted); }
  .params dd { color: var(--text); font-family: monospace; }
  .repro { background: var(--repro-bg); border: 1px solid var(--border); border-radius: 6px; padding: 12px; margin-top: 8px;
           font-family: monospace; font-size: 12px; color: var(--repro-text); white-space: pre-wrap; word-break: break-all;
           cursor: pointer; position: relative; }
  .repro { position: relative; }
  .repro:hover { border-color: var(--green); }
  .repro .repro-hint { position: absolute; right: 8px; top: -10px; font-size: 10px; color: var(--text-dimmed);
                       background: var(--bg); padding: 1px 6px; border-radius: 3px; border: 1px solid var(--border); transition: all 0.15s; }
  .repro .repro-hint.copied { color: var(--green); border-color: var(--green); }
  .charts { padding: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .chart { background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; padding: 8px; display: grid; grid-template-columns: 1fr; gap: 0; overflow: visible; }
  .chart.full { grid-column: 1 / -1; grid-template-columns: 1fr 280px; }
  .chart.full .chart-help { border-left: 1px solid var(--border); border-top: none; }
  .chart:not(.full) .chart-help { border-top: 1px solid var(--border); border-left: none; max-height: none; }
  .chart-help { font-size: 12px; color: var(--text-muted); padding: 12px 16px; line-height: 1.7; border-left: 1px solid var(--border); overflow: visible; }
  .chart-help .title { color: var(--text-heading); font-weight: 600; display: block; margin-bottom: 6px; font-size: 13px; }
  .chart-help .legend { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 8px; }
  .chart-help .legend-item { display: flex; align-items: center; gap: 4px; font-size: 11px; cursor: pointer; user-select: none; padding: 2px 4px; border-radius: 3px; transition: opacity 0.15s; }
  .chart-help .legend-item:hover { background: var(--border); }
  .chart-help .legend-item.hidden { opacity: 0.35; text-decoration: line-through; }
  .chart-help .legend-dot { width: 10px; height: 3px; border-radius: 1px; display: inline-block; transition: opacity 0.15s; }
  .chart-help .insight { background: var(--bg-insight); border-left: 3px solid var(--accent); padding: 6px 10px; margin: 6px 0; border-radius: 0 4px 4px 0; font-size: 12px; color: var(--text); transition: background 0.15s; }
  .chart-help .insight[data-highlight]:hover { background: var(--border); cursor: pointer; }
  .chart-help .insight.warn { border-left-color: var(--yellow); }
  .chart-help .insight.bad { border-left-color: var(--red); }
  .chart-help .insight.good { border-left-color: var(--green); }
  .chart-help .how-to { color: var(--text-faint); font-size: 11px; margin-top: 6px; }
  .kw { border-bottom: 1px dotted var(--text-dimmed); cursor: help; position: relative; }
  .kw:hover { color: var(--accent); border-bottom-color: var(--accent); }
  .kw-tip { display: none; position: fixed; z-index: 999999;
            background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; padding: 8px 12px;
            font-size: 11px; color: var(--text); white-space: normal; width: 260px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5); line-height: 1.5; pointer-events: none; }
  .kw-tip.visible { display: block; }
  .plot { width: 100%; height: 350px; }
  .plot.tall { height: 450px; }
  .anomalies { margin-top: 8px; }
  .anomaly { background: var(--bg-anomaly); border: 1px solid var(--red); border-radius: 4px; padding: 6px 10px; margin: 4px 0;
             font-size: 12px; color: var(--text-heading); }
  .anomaly .ts { color: var(--red); font-weight: 600; }
</style>
</head>
<body>
<div class="header">
  <div class="header-left">
    <h1>mcp-stress results</h1>
    <div class="meta" id="meta"></div>
  </div>
  <button class="theme-toggle" id="theme-toggle">Light mode</button>
</div>
<div class="stats" id="stats"></div>

<div class="section" id="run-params"></div>

<div class="charts">
  <div class="chart full">
    <div id="throughput" class="plot"></div>
    <div class="chart-help" id="help-throughput"></div>
  </div>
  <div class="chart full">
    <div id="latency-time" class="plot tall"></div>
    <div class="chart-help" id="help-latency-time"></div>
  </div>
  <div class="chart">
    <div id="latency-hist" class="plot"></div>
    <div class="chart-help" id="help-latency-hist"></div>
  </div>
  <div class="chart">
    <div id="latency-box" class="plot"></div>
    <div class="chart-help" id="help-latency-box"></div>
  </div>
  
  <div class="chart full">
    <div id="concurrency" class="plot tall"></div>
    <div class="chart-help" id="help-concurrency"></div>
  </div>
</div>


<script>
const D = {"events":[{"t":551,"method":"tools/call:search_docs","latencyMs":550.53,"ok":true,"concurrency":1},{"t":1003,"method":"tools/call:search_docs","latencyMs":448.81,"ok":true,"concurrency":1},{"t":1399,"method":"tools/call:search_docs","latencyMs":395.48,"ok":true,"concurrency":1},{"t":1886,"method":"tools/call:search_docs","latencyMs":487.14,"ok":true,"concurrency":1},{"t":2391,"method":"tools/call:search_docs","latencyMs":504.3,"ok":true,"concurrency":1},{"t":2775,"method":"tools/call:search_docs","latencyMs":384.13,"ok":true,"concurrency":1},{"t":3187,"method":"tools/call:search_docs","latencyMs":411.95,"ok":true,"concurrency":1},{"t":3560,"method":"tools/call:search_docs","latencyMs":373.17,"ok":true,"concurrency":1},{"t":3955,"method":"tools/call:search_docs","latencyMs":394.45,"ok":true,"concurrency":1},{"t":4750,"method":"tools/call:search_docs","latencyMs":795.42,"ok":true,"concurrency":1},{"t":5128,"method":"tools/call:search_docs","latencyMs":377.24,"ok":true,"concurrency":1},{"t":5511,"method":"tools/call:search_docs","latencyMs":382.62,"ok":true,"concurrency":1},{"t":6486,"method":"tools/call:search_docs","latencyMs":975.39,"ok":true,"concurrency":1},{"t":6866,"method":"tools/call:search_docs","latencyMs":379.64,"ok":true,"concurrency":1},{"t":7264,"method":"tools/call:search_docs","latencyMs":397.96,"ok":true,"concurrency":1},{"t":7715,"method":"tools/call:search_docs","latencyMs":450.33,"ok":true,"concurrency":1},{"t":8095,"method":"tools/call:search_docs","latencyMs":380.11,"ok":true,"concurrency":1},{"t":8534,"method":"tools/call:search_docs","latencyMs":438.75,"ok":true,"concurrency":1},{"t":8919,"method":"tools/call:search_docs","latencyMs":385.48,"ok":true,"concurrency":1},{"t":9296,"method":"tools/call:search_docs","latencyMs":376.66,"ok":true,"concurrency":1},{"t":9726,"method":"tools/call:search_docs","latencyMs":429.58,"ok":true,"concurrency":2},{"t":9951,"method":"tools/call:search_docs","latencyMs":654.36,"ok":true,"concurrency":2},{"t":10162,"method":"tools/call:search_docs","latencyMs":435.66,"ok":true,"concurrency":2},{"t":10326,"method":"tools/call:search_docs","latencyMs":375.04,"ok":true,"concurrency":2},{"t":10582,"method":"tools/call:search_docs","latencyMs":419.99,"ok":true,"concurrency":2},{"t":10932,"method":"tools/call:search_docs","latencyMs":606.18,"ok":true,"concurrency":2},{"t":10989,"method":"tools/call:search_docs","latencyMs":407.07,"ok":true,"concurrency":2},{"t":11393,"method":"tools/call:search_docs","latencyMs":403.46,"ok":true,"concurrency":2},{"t":11611,"method":"tools/call:search_docs","latencyMs":678.33,"ok":true,"concurrency":2},{"t":11952,"method":"tools/call:search_docs","latencyMs":559.26,"ok":true,"concurrency":2},{"t":11996,"method":"tools/call:search_docs","latencyMs":385.07,"ok":true,"concurrency":2},{"t":12594,"method":"tools/call:search_docs","latencyMs":597.67,"ok":true,"concurrency":2},{"t":12777,"method":"tools/call:search_docs","latencyMs":825.25,"ok":true,"concurrency":2},{"t":12997,"method":"tools/call:search_docs","latencyMs":403.61,"ok":true,"concurrency":2},{"t":13188,"method":"tools/call:search_docs","latencyMs":410.88,"ok":true,"concurrency":2},{"t":13382,"method":"tools/call:search_docs","latencyMs":384.74,"ok":true,"concurrency":2},{"t":13744,"method":"tools/call:search_docs","latencyMs":555.84,"ok":true,"concurrency":2},{"t":13781,"method":"tools/call:search_docs","latencyMs":398.68,"ok":true,"concurrency":2},{"t":14183,"method":"tools/call:search_docs","latencyMs":438.27,"ok":true,"concurrency":2},{"t":14184,"method":"tools/call:search_docs","latencyMs":403.03,"ok":true,"concurrency":2},{"t":14593,"method":"tools/call:search_docs","latencyMs":408.93,"ok":true,"concurrency":2},{"t":15027,"method":"tools/call:search_docs","latencyMs":843.64,"ok":true,"concurrency":2},{"t":15312,"method":"tools/call:search_docs","latencyMs":718.78,"ok":true,"concurrency":2},{"t":15424,"method":"tools/call:search_docs","latencyMs":397.77,"ok":true,"concurrency":2},{"t":15832,"method":"tools/call:search_docs","latencyMs":407.51,"ok":true,"concurrency":2},{"t":15944,"method":"tools/call:search_docs","latencyMs":631.84,"ok":true,"concurrency":2},{"t":16284,"method":"tools/call:search_docs","latencyMs":451.32,"ok":true,"concurrency":2},{"t":16568,"method":"tools/call:search_docs","latencyMs":623.9,"ok":true,"concurrency":2},{"t":16897,"method":"tools/call:search_docs","latencyMs":612.95,"ok":true,"concurrency":2},{"t":16958,"method":"tools/call:search_docs","latencyMs":389.72,"ok":true,"concurrency":2},{"t":17303,"method":"tools/call:search_docs","latencyMs":406.21,"ok":true,"concurrency":2},{"t":17357,"method":"tools/call:search_docs","latencyMs":398.88,"ok":true,"concurrency":2},{"t":17749,"method":"tools/call:search_docs","latencyMs":391.92,"ok":true,"concurrency":2},{"t":17868,"method":"tools/call:search_docs","latencyMs":565.19,"ok":true,"concurrency":2},{"t":18257,"method":"tools/call:search_docs","latencyMs":388.94,"ok":true,"concurrency":2},{"t":18352,"method":"tools/call:search_docs","latencyMs":603.08,"ok":true,"concurrency":2},{"t":18828,"method":"tools/call:search_docs","latencyMs":570.35,"ok":true,"concurrency":2},{"t":19295,"method":"tools/call:search_docs","latencyMs":466.65,"ok":true,"concurrency":3},{"t":19369,"method":"tools/call:search_docs","latencyMs":540.53,"ok":true,"concurrency":3},{"t":19702,"method":"tools/call:search_docs","latencyMs":874.4,"ok":true,"concurrency":3},{"t":19703,"method":"tools/call:search_docs","latencyMs":407.76,"ok":true,"concurrency":3},{"t":19786,"method":"tools/call:search_docs","latencyMs":417.07,"ok":true,"concurrency":3},{"t":20135,"method":"tools/call:search_docs","latencyMs":432.6,"ok":true,"concurrency":3},{"t":20155,"method":"tools/call:search_docs","latencyMs":452.19,"ok":true,"concurrency":3},{"t":20617,"method":"tools/call:search_docs","latencyMs":831.38,"ok":true,"concurrency":3},{"t":20774,"method":"tools/call:search_docs","latencyMs":619.46,"ok":true,"concurrency":3},{"t":20846,"method":"tools/call:search_docs","latencyMs":710.74,"ok":true,"concurrency":3},{"t":21011,"method":"tools/call:search_docs","latencyMs":394.05,"ok":true,"concurrency":3},{"t":21290,"method":"tools/call:search_docs","latencyMs":443.92,"ok":true,"concurrency":3},{"t":21384,"method":"tools/call:search_docs","latencyMs":609.74,"ok":true,"concurrency":3},{"t":21392,"method":"tools/call:search_docs","latencyMs":380.13,"ok":true,"concurrency":3},{"t":21690,"method":"tools/call:search_docs","latencyMs":399.89,"ok":true,"concurrency":3},{"t":21834,"method":"tools/call:search_docs","latencyMs":449.09,"ok":true,"concurrency":3},{"t":22092,"method":"tools/call:search_docs","latencyMs":401.35,"ok":true,"concurrency":3},{"t":22125,"method":"tools/call:search_docs","latencyMs":733.54,"ok":true,"concurrency":3},{"t":22255,"method":"tools/call:search_docs","latencyMs":421.42,"ok":true,"concurrency":3},{"t":22548,"method":"tools/call:search_docs","latencyMs":455.66,"ok":true,"concurrency":3},{"t":22693,"method":"tools/call:search_docs","latencyMs":437.18,"ok":true,"concurrency":3},{"t":22927,"method":"tools/call:search_docs","latencyMs":379.24,"ok":true,"concurrency":3},{"t":22961,"method":"tools/call:search_docs","latencyMs":835.8,"ok":true,"concurrency":3},{"t":23071,"method":"tools/call:search_docs","latencyMs":378.76,"ok":true,"concurrency":3},{"t":23383,"method":"tools/call:search_docs","latencyMs":456.03,"ok":true,"concurrency":3},{"t":23387,"method":"tools/call:search_docs","latencyMs":425.19,"ok":true,"concurrency":3},{"t":23539,"method":"tools/call:search_docs","latencyMs":467.66,"ok":true,"concurrency":3},{"t":23841,"method":"tools/call:search_docs","latencyMs":453.79,"ok":true,"concurrency":3},{"t":23841,"method":"tools/call:search_docs","latencyMs":457.33,"ok":true,"concurrency":3},{"t":23965,"method":"tools/call:search_docs","latencyMs":426.03,"ok":true,"concurrency":3},{"t":24290,"method":"tools/call:search_docs","latencyMs":449.32,"ok":true,"concurrency":3},{"t":24292,"method":"tools/call:search_docs","latencyMs":451.41,"ok":true,"concurrency":3},{"t":24417,"method":"tools/call:search_docs","latencyMs":451.23,"ok":true,"concurrency":3},{"t":24819,"method":"tools/call:search_docs","latencyMs":526.97,"ok":true,"concurrency":3},{"t":24819,"method":"tools/call:search_docs","latencyMs":529.01,"ok":true,"concurrency":3},{"t":25089,"method":"tools/call:search_docs","latencyMs":672.35,"ok":true,"concurrency":3},{"t":25236,"method":"tools/call:search_docs","latencyMs":416.34,"ok":true,"concurrency":3},{"t":25258,"method":"tools/call:search_docs","latencyMs":438.57,"ok":true,"concurrency":3},{"t":25493,"method":"tools/call:search_docs","latencyMs":403.99,"ok":true,"concurrency":3},{"t":25683,"method":"tools/call:search_docs","latencyMs":424.71,"ok":true,"concurrency":3},{"t":25700,"method":"tools/call:search_docs","latencyMs":463.94,"ok":true,"concurrency":3},{"t":26148,"method":"tools/call:search_docs","latencyMs":465.78,"ok":true,"concurrency":3},{"t":26149,"method":"tools/call:search_docs","latencyMs":655.31,"ok":true,"concurrency":3},{"t":26149,"method":"tools/call:search_docs","latencyMs":448.91,"ok":true,"concurrency":3},{"t":26610,"method":"tools/call:search_docs","latencyMs":461.5,"ok":true,"concurrency":3},{"t":26698,"method":"tools/call:search_docs","latencyMs":549.02,"ok":true,"concurrency":3},{"t":26778,"method":"tools/call:search_docs","latencyMs":628.91,"ok":true,"concurrency":3},{"t":27068,"method":"tools/call:search_docs","latencyMs":458.12,"ok":true,"concurrency":3},{"t":27117,"method":"tools/call:search_docs","latencyMs":418.95,"ok":true,"concurrency":3},{"t":27221,"method":"tools/call:search_docs","latencyMs":442.83,"ok":true,"concurrency":3},{"t":27494,"method":"tools/call:search_docs","latencyMs":425.71,"ok":true,"concurrency":3},{"t":27550,"method":"tools/call:search_docs","latencyMs":432.94,"ok":true,"concurrency":3},{"t":27895,"method":"tools/call:search_docs","latencyMs":401.15,"ok":true,"concurrency":3},{"t":27910,"method":"tools/call:search_docs","latencyMs":689.7,"ok":true,"concurrency":3},{"t":27979,"method":"tools/call:search_docs","latencyMs":429.27,"ok":true,"concurrency":3},{"t":28509,"method":"tools/call:search_docs","latencyMs":530.27,"ok":true,"concurrency":4},{"t":28544,"method":"tools/call:search_docs","latencyMs":565.08,"ok":true,"concurrency":4},{"t":28693,"method":"tools/call:search_docs","latencyMs":713.81,"ok":true,"concurrency":4},{"t":28808,"method":"tools/call:search_docs","latencyMs":829.15,"ok":true,"concurrency":4},{"t":28963,"method":"tools/call:search_docs","latencyMs":452.97,"ok":true,"concurrency":4},{"t":28971,"method":"tools/call:search_docs","latencyMs":426.53,"ok":true,"concurrency":4},{"t":29135,"method":"tools/call:search_docs","latencyMs":441.57,"ok":true,"concurrency":4},{"t":29225,"method":"tools/call:search_docs","latencyMs":416.27,"ok":true,"concurrency":4},{"t":29495,"method":"tools/call:search_docs","latencyMs":524.4,"ok":true,"concurrency":4},{"t":29498,"method":"tools/call:search_docs","latencyMs":534.93,"ok":true,"concurrency":4},{"t":29676,"method":"tools/call:search_docs","latencyMs":540.94,"ok":true,"concurrency":4},{"t":29791,"method":"tools/call:search_docs","latencyMs":566.2,"ok":true,"concurrency":4},{"t":29955,"method":"tools/call:search_docs","latencyMs":459.65,"ok":true,"concurrency":4},{"t":30130,"method":"tools/call:search_docs","latencyMs":453.7,"ok":true,"concurrency":4},{"t":30147,"method":"tools/call:search_docs","latencyMs":649.14,"ok":true,"concurrency":4},{"t":30222,"method":"tools/call:search_docs","latencyMs":430.37,"ok":true,"concurrency":4},{"t":30354,"method":"tools/call:search_docs","latencyMs":398.77,"ok":true,"concurrency":4},{"t":30644,"method":"tools/call:search_docs","latencyMs":497.34,"ok":true,"concurrency":4},{"t":30803,"method":"tools/call:search_docs","latencyMs":673.24,"ok":true,"concurrency":4},{"t":30860,"method":"tools/call:search_docs","latencyMs":506.19,"ok":true,"concurrency":4},{"t":30890,"method":"tools/call:search_docs","latencyMs":668.33,"ok":true,"concurrency":4},{"t":31216,"method":"tools/call:search_docs","latencyMs":412.25,"ok":true,"concurrency":4},{"t":31279,"method":"tools/call:search_docs","latencyMs":634.84,"ok":true,"concurrency":4},{"t":31345,"method":"tools/call:search_docs","latencyMs":484.28,"ok":true,"concurrency":4},{"t":31357,"method":"tools/call:search_docs","latencyMs":466.82,"ok":true,"concurrency":4},{"t":31768,"method":"tools/call:search_docs","latencyMs":488.56,"ok":true,"concurrency":4},{"t":31825,"method":"tools/call:search_docs","latencyMs":480.02,"ok":true,"concurrency":4},{"t":31956,"method":"tools/call:search_docs","latencyMs":598.47,"ok":true,"concurrency":4},{"t":32083,"method":"tools/call:search_docs","latencyMs":867.2,"ok":true,"concurrency":4},{"t":32234,"method":"tools/call:search_docs","latencyMs":409.43,"ok":true,"concurrency":4},{"t":32411,"method":"tools/call:search_docs","latencyMs":455.52,"ok":true,"concurrency":4},{"t":32484,"method":"tools/call:search_docs","latencyMs":401.46,"ok":true,"concurrency":4},{"t":32535,"method":"tools/call:search_docs","latencyMs":766.69,"ok":true,"concurrency":4},{"t":32666,"method":"tools/call:search_docs","latencyMs":431.3,"ok":true,"concurrency":4},{"t":32865,"method":"tools/call:search_docs","latencyMs":453.39,"ok":true,"concurrency":4},{"t":33012,"method":"tools/call:search_docs","latencyMs":527.77,"ok":true,"concurrency":4},{"t":33314,"method":"tools/call:search_docs","latencyMs":449.5,"ok":true,"concurrency":4},{"t":33319,"method":"tools/call:search_docs","latencyMs":784.1,"ok":true,"concurrency":4},{"t":33355,"method":"tools/call:search_docs","latencyMs":689.29,"ok":true,"concurrency":4},{"t":33405,"method":"tools/call:search_docs","latencyMs":392.32,"ok":true,"concurrency":4},{"t":33826,"method":"tools/call:search_docs","latencyMs":512.18,"ok":true,"concurrency":4},{"t":33841,"method":"tools/call:search_docs","latencyMs":522.25,"ok":true,"concurrency":4},{"t":33917,"method":"tools/call:search_docs","latencyMs":561.39,"ok":true,"concurrency":4},{"t":33979,"method":"tools/call:search_docs","latencyMs":574.09,"ok":true,"concurrency":4},{"t":34339,"method":"tools/call:search_docs","latencyMs":498.13,"ok":true,"concurrency":4},{"t":34357,"method":"tools/call:search_docs","latencyMs":530.01,"ok":true,"concurrency":4},{"t":34435,"method":"tools/call:search_docs","latencyMs":518.28,"ok":true,"concurrency":4},{"t":34563,"method":"tools/call:search_docs","latencyMs":584.27,"ok":true,"concurrency":4},{"t":34782,"method":"tools/call:search_docs","latencyMs":442.37,"ok":true,"concurrency":4},{"t":34860,"method":"tools/call:search_docs","latencyMs":503.72,"ok":true,"concurrency":4},{"t":35099,"method":"tools/call:search_docs","latencyMs":535.51,"ok":true,"concurrency":4},{"t":35119,"method":"tools/call:search_docs","latencyMs":684.15,"ok":true,"concurrency":4},{"t":35196,"method":"tools/call:search_docs","latencyMs":414.55,"ok":true,"concurrency":4},{"t":35568,"method":"tools/call:search_docs","latencyMs":707.16,"ok":true,"concurrency":4},{"t":35580,"method":"tools/call:search_docs","latencyMs":460.26,"ok":true,"concurrency":4},{"t":35676,"method":"tools/call:search_docs","latencyMs":479.14,"ok":true,"concurrency":4},{"t":35737,"method":"tools/call:search_docs","latencyMs":637.78,"ok":true,"concurrency":4},{"t":36083,"method":"tools/call:search_docs","latencyMs":515.21,"ok":true,"concurrency":4},{"t":36083,"method":"tools/call:search_docs","latencyMs":503.53,"ok":true,"concurrency":4},{"t":36157,"method":"tools/call:search_docs","latencyMs":481.57,"ok":true,"concurrency":4},{"t":36492,"method":"tools/call:search_docs","latencyMs":755.16,"ok":true,"concurrency":4},{"t":36560,"method":"tools/call:search_docs","latencyMs":402.98,"ok":true,"concurrency":4},{"t":36829,"method":"tools/call:search_docs","latencyMs":746.07,"ok":true,"concurrency":4},{"t":36939,"method":"tools/call:search_docs","latencyMs":856.05,"ok":true,"concurrency":4},{"t":37008,"method":"tools/call:search_docs","latencyMs":447.18,"ok":true,"concurrency":4},{"t":37145,"method":"tools/call:search_docs","latencyMs":652.86,"ok":true,"concurrency":4},{"t":37320,"method":"tools/call:search_docs","latencyMs":380.72,"ok":true,"concurrency":4},{"t":37514,"method":"tools/call:search_docs","latencyMs":684.63,"ok":true,"concurrency":4},{"t":38036,"method":"tools/call:search_docs","latencyMs":522.07,"ok":true,"concurrency":5},{"t":38043,"method":"tools/call:search_docs","latencyMs":529.23,"ok":true,"concurrency":5},{"t":38130,"method":"tools/call:search_docs","latencyMs":615.8,"ok":true,"concurrency":5},{"t":38182,"method":"tools/call:search_docs","latencyMs":668.14,"ok":true,"concurrency":5},{"t":38585,"method":"tools/call:search_docs","latencyMs":1070.71,"ok":true,"concurrency":5},{"t":38685,"method":"tools/call:search_docs","latencyMs":555.5,"ok":true,"concurrency":5},{"t":38790,"method":"tools/call:search_docs","latencyMs":753.42,"ok":true,"concurrency":5},{"t":38822,"method":"tools/call:search_docs","latencyMs":639.6,"ok":true,"concurrency":5},{"t":38826,"method":"tools/call:search_docs","latencyMs":782.54,"ok":true,"concurrency":5},{"t":39026,"method":"tools/call:search_docs","latencyMs":440.99,"ok":true,"concurrency":5},{"t":39096,"method":"tools/call:search_docs","latencyMs":410.02,"ok":true,"concurrency":5},{"t":39309,"method":"tools/call:search_docs","latencyMs":486.81,"ok":true,"concurrency":5},{"t":39492,"method":"tools/call:search_docs","latencyMs":702.36,"ok":true,"concurrency":5},{"t":39497,"method":"tools/call:search_docs","latencyMs":671.37,"ok":true,"concurrency":5},{"t":39704,"method":"tools/call:search_docs","latencyMs":395.35,"ok":true,"concurrency":5},{"t":39766,"method":"tools/call:search_docs","latencyMs":739.96,"ok":true,"concurrency":5},{"t":39923,"method":"tools/call:search_docs","latencyMs":425.05,"ok":true,"concurrency":5},{"t":40012,"method":"tools/call:search_docs","latencyMs":519.95,"ok":true,"concurrency":5},{"t":40045,"method":"tools/call:search_docs","latencyMs":949.86,"ok":true,"concurrency":5},{"t":40152,"method":"tools/call:search_docs","latencyMs":447.23,"ok":true,"concurrency":5},{"t":40399,"method":"tools/call:search_docs","latencyMs":632.74,"ok":true,"concurrency":5},{"t":40419,"method":"tools/call:search_docs","latencyMs":496.31,"ok":true,"concurrency":5},{"t":40554,"method":"tools/call:search_docs","latencyMs":508.33,"ok":true,"concurrency":5},{"t":40692,"method":"tools/call:search_docs","latencyMs":540.72,"ok":true,"concurrency":5},{"t":40726,"method":"tools/call:search_docs","latencyMs":713.49,"ok":true,"concurrency":5},{"t":40966,"method":"tools/call:search_docs","latencyMs":567.19,"ok":true,"concurrency":5},{"t":41067,"method":"tools/call:search_docs","latencyMs":513.33,"ok":true,"concurrency":5},{"t":41148,"method":"tools/call:search_docs","latencyMs":455.35,"ok":true,"concurrency":5},{"t":41177,"method":"tools/call:search_docs","latencyMs":758.01,"ok":true,"concurrency":5},{"t":41266,"method":"tools/call:search_docs","latencyMs":540.19,"ok":true,"concurrency":5},{"t":41611,"method":"tools/call:search_docs","latencyMs":543.66,"ok":true,"concurrency":5},{"t":41643,"method":"tools/call:search_docs","latencyMs":494.74,"ok":true,"concurrency":5},{"t":41659,"method":"tools/call:search_docs","latencyMs":693.26,"ok":true,"concurrency":5},{"t":41679,"method":"tools/call:search_docs","latencyMs":502.4,"ok":true,"concurrency":5},{"t":41834,"method":"tools/call:search_docs","latencyMs":567.37,"ok":true,"concurrency":5},{"t":42099,"method":"tools/call:search_docs","latencyMs":487.76,"ok":true,"concurrency":5},{"t":42180,"method":"tools/call:search_docs","latencyMs":520.33,"ok":true,"concurrency":5},{"t":42211,"method":"tools/call:search_docs","latencyMs":568.09,"ok":true,"concurrency":5},{"t":42371,"method":"tools/call:search_docs","latencyMs":691.79,"ok":true,"concurrency":5},{"t":42526,"method":"tools/call:search_docs","latencyMs":426.72,"ok":true,"concurrency":5},{"t":42741,"method":"tools/call:search_docs","latencyMs":561.33,"ok":true,"concurrency":5},{"t":42875,"method":"tools/call:search_docs","latencyMs":1040.92,"ok":true,"concurrency":5},{"t":42878,"method":"tools/call:search_docs","latencyMs":507.05,"ok":true,"concurrency":5},{"t":42984,"method":"tools/call:search_docs","latencyMs":772.96,"ok":true,"concurrency":5},{"t":43080,"method":"tools/call:search_docs","latencyMs":554.63,"ok":true,"concurrency":5},{"t":43386,"method":"tools/call:search_docs","latencyMs":507.08,"ok":true,"concurrency":5},{"t":43389,"method":"tools/call:search_docs","latencyMs":647.85,"ok":true,"concurrency":5},{"t":43401,"method":"tools/call:search_docs","latencyMs":526.86,"ok":true,"concurrency":5},{"t":43505,"method":"tools/call:search_docs","latencyMs":520.97,"ok":true,"concurrency":5},{"t":43650,"method":"tools/call:search_docs","latencyMs":569.42,"ok":true,"concurrency":5},{"t":43904,"method":"tools/call:search_docs","latencyMs":517.89,"ok":true,"concurrency":5},{"t":43964,"method":"tools/call:search_docs","latencyMs":562.41,"ok":true,"concurrency":5},{"t":43994,"method":"tools/call:search_docs","latencyMs":604.33,"ok":true,"concurrency":5},{"t":44100,"method":"tools/call:search_docs","latencyMs":595.45,"ok":true,"concurrency":5},{"t":44200,"method":"tools/call:search_docs","latencyMs":549.56,"ok":true,"concurrency":5},{"t":44476,"method":"tools/call:search_docs","latencyMs":572.69,"ok":true,"concurrency":5},{"t":44492,"method":"tools/call:search_docs","latencyMs":528.03,"ok":true,"concurrency":5},{"t":44593,"method":"tools/call:search_docs","latencyMs":599.08,"ok":true,"concurrency":5},{"t":44604,"method":"tools/call:search_docs","latencyMs":503.42,"ok":true,"concurrency":5},{"t":45048,"method":"tools/call:search_docs","latencyMs":556.28,"ok":true,"concurrency":5},{"t":45132,"method":"tools/call:search_docs","latencyMs":932.02,"ok":true,"concurrency":5},{"t":45162,"method":"tools/call:search_docs","latencyMs":685.86,"ok":true,"concurrency":5},{"t":45413,"method":"tools/call:search_docs","latencyMs":809.1,"ok":true,"concurrency":5},{"t":45448,"method":"tools/call:search_docs","latencyMs":854.87,"ok":true,"concurrency":5},{"t":45603,"method":"tools/call:search_docs","latencyMs":470.87,"ok":true,"concurrency":5},{"t":45646,"method":"tools/call:search_docs","latencyMs":597.19,"ok":true,"concurrency":5},{"t":45835,"method":"tools/call:search_docs","latencyMs":421.35,"ok":true,"concurrency":5},{"t":45847,"method":"tools/call:search_docs","latencyMs":684.53,"ok":true,"concurrency":5},{"t":45917,"method":"tools/call:search_docs","latencyMs":469.29,"ok":true,"concurrency":5},{"t":46070,"method":"tools/call:search_docs","latencyMs":467.58,"ok":true,"concurrency":5},{"t":46122,"method":"tools/call:search_docs","latencyMs":475.75,"ok":true,"concurrency":5},{"t":46422,"method":"tools/call:search_docs","latencyMs":586.93,"ok":true,"concurrency":5},{"t":46465,"method":"tools/call:search_docs","latencyMs":618.07,"ok":true,"concurrency":5},{"t":46560,"method":"tools/call:search_docs","latencyMs":489.7,"ok":true,"concurrency":5},{"t":46721,"method":"tools/call:search_docs","latencyMs":803.56,"ok":true,"concurrency":5},{"t":46838,"method":"tools/call:search_docs","latencyMs":415.96,"ok":true,"concurrency":5},{"t":46913,"method":"tools/call:search_docs","latencyMs":447.27,"ok":true,"concurrency":5},{"t":46978,"method":"tools/call:search_docs","latencyMs":856.61,"ok":true,"concurrency":5},{"t":47637,"method":"tools/call:search_docs","latencyMs":658.41,"ok":true,"concurrency":10},{"t":47745,"method":"tools/call:search_docs","latencyMs":766.07,"ok":true,"concurrency":10},{"t":47793,"method":"tools/call:search_docs","latencyMs":814.81,"ok":true,"concurrency":10},{"t":48265,"method":"tools/call:search_docs","latencyMs":1286.86,"ok":true,"concurrency":10},{"t":48348,"method":"tools/call:search_docs","latencyMs":711.36,"ok":true,"concurrency":10},{"t":48348,"method":"tools/call:search_docs","latencyMs":1370.01,"ok":true,"concurrency":10},{"t":48348,"method":"tools/call:search_docs","latencyMs":1370.02,"ok":true,"concurrency":10},{"t":48430,"method":"tools/call:search_docs","latencyMs":1451.93,"ok":true,"concurrency":10},{"t":48449,"method":"tools/call:search_docs","latencyMs":655.18,"ok":true,"concurrency":10},{"t":48453,"method":"tools/call:search_docs","latencyMs":708.9,"ok":true,"concurrency":10},{"t":48486,"method":"tools/call:search_docs","latencyMs":1507.2,"ok":true,"concurrency":10},{"t":48492,"method":"tools/call:search_docs","latencyMs":1513.22,"ok":true,"concurrency":10},{"t":48881,"method":"tools/call:search_docs","latencyMs":1902.66,"ok":true,"concurrency":10},{"t":48881,"method":"tools/call:search_docs","latencyMs":615.84,"ok":true,"concurrency":10},{"t":48978,"method":"tools/call:search_docs","latencyMs":629.45,"ok":true,"concurrency":10},{"t":49017,"method":"tools/call:search_docs","latencyMs":668.92,"ok":true,"concurrency":10},{"t":49169,"method":"tools/call:search_docs","latencyMs":820.04,"ok":true,"concurrency":10},{"t":49703,"method":"tools/call:search_docs","latencyMs":725.02,"ok":true,"concurrency":10},{"t":49831,"method":"tools/call:search_docs","latencyMs":1382.16,"ok":true,"concurrency":10},{"t":49837,"method":"tools/call:search_docs","latencyMs":1351.29,"ok":true,"concurrency":10},{"t":49839,"method":"tools/call:search_docs","latencyMs":1385.24,"ok":true,"concurrency":10},{"t":49840,"method":"tools/call:search_docs","latencyMs":822.28,"ok":true,"concurrency":10},{"t":49884,"method":"tools/call:search_docs","latencyMs":1002.8,"ok":true,"concurrency":10},{"t":50043,"method":"tools/call:search_docs","latencyMs":1161.52,"ok":true,"concurrency":10},{"t":50160,"method":"tools/call:search_docs","latencyMs":1668.1,"ok":true,"concurrency":10},{"t":50184,"method":"tools/call:search_docs","latencyMs":480.83,"ok":true,"concurrency":10},{"t":50226,"method":"tools/call:search_docs","latencyMs":1795.51,"ok":true,"concurrency":10},{"t":50423,"method":"tools/call:search_docs","latencyMs":1253.87,"ok":true,"concurrency":10},{"t":50435,"method":"tools/call:search_docs","latencyMs":595.26,"ok":true,"concurrency":10},{"t":50568,"method":"tools/call:search_docs","latencyMs":737.2,"ok":true,"concurrency":10},{"t":50721,"method":"tools/call:search_docs","latencyMs":883.68,"ok":true,"concurrency":10},{"t":50727,"method":"tools/call:search_docs","latencyMs":684.1,"ok":true,"concurrency":10},{"t":51236,"method":"tools/call:search_docs","latencyMs":812.69,"ok":true,"concurrency":10},{"t":51244,"method":"tools/call:search_docs","latencyMs":809.42,"ok":true,"concurrency":10},{"t":51285,"method":"tools/call:search_docs","latencyMs":1446.61,"ok":true,"concurrency":10},{"t":51294,"method":"tools/call:search_docs","latencyMs":725.42,"ok":true,"concurrency":10},{"t":51444,"method":"tools/call:search_docs","latencyMs":1283.93,"ok":true,"concurrency":10},{"t":51451,"method":"tools/call:search_docs","latencyMs":730.12,"ok":true,"concurrency":10},{"t":51611,"method":"tools/call:search_docs","latencyMs":1384.96,"ok":true,"concurrency":10},{"t":51618,"method":"tools/call:search_docs","latencyMs":1733.83,"ok":true,"concurrency":10},{"t":51849,"method":"tools/call:search_docs","latencyMs":1664.85,"ok":true,"concurrency":10},{"t":51911,"method":"tools/call:search_docs","latencyMs":675.67,"ok":true,"concurrency":10},{"t":51980,"method":"tools/call:search_docs","latencyMs":694.72,"ok":true,"concurrency":10},{"t":52189,"method":"tools/call:search_docs","latencyMs":944.21,"ok":true,"concurrency":10},{"t":52262,"method":"tools/call:search_docs","latencyMs":1534.55,"ok":true,"concurrency":10},{"t":52458,"method":"tools/call:search_docs","latencyMs":1164.87,"ok":true,"concurrency":10},{"t":52516,"method":"tools/call:search_docs","latencyMs":605.03,"ok":true,"concurrency":10},{"t":52702,"method":"tools/call:search_docs","latencyMs":852.63,"ok":true,"concurrency":10},{"t":52767,"method":"tools/call:search_docs","latencyMs":786.12,"ok":true,"concurrency":10},{"t":52828,"method":"tools/call:search_docs","latencyMs":1217.11,"ok":true,"concurrency":10},{"t":52845,"method":"tools/call:search_docs","latencyMs":1226.88,"ok":true,"concurrency":10},{"t":52984,"method":"tools/call:search_docs","latencyMs":1533.06,"ok":true,"concurrency":10},{"t":53003,"method":"tools/call:search_docs","latencyMs":1559.51,"ok":true,"concurrency":10},{"t":53195,"method":"tools/call:search_docs","latencyMs":736.11,"ok":true,"concurrency":10},{"t":53248,"method":"tools/call:search_docs","latencyMs":1059.33,"ok":true,"concurrency":10},{"t":53366,"method":"tools/call:search_docs","latencyMs":664.37,"ok":true,"concurrency":10},{"t":53417,"method":"tools/call:search_docs","latencyMs":900.43,"ok":true,"concurrency":10},{"t":53482,"method":"tools/call:search_docs","latencyMs":1219.87,"ok":true,"concurrency":10},{"t":53670,"method":"tools/call:search_docs","latencyMs":666.28,"ok":true,"concurrency":10},{"t":53813,"method":"tools/call:search_docs","latencyMs":828.8,"ok":true,"concurrency":10},{"t":53942,"method":"tools/call:search_docs","latencyMs":747.31,"ok":true,"concurrency":10},{"t":54308,"method":"tools/call:search_docs","latencyMs":826.87,"ok":true,"concurrency":10},{"t":54313,"method":"tools/call:search_docs","latencyMs":1468.5,"ok":true,"concurrency":10},{"t":54322,"method":"tools/call:search_docs","latencyMs":1074.04,"ok":true,"concurrency":10},{"t":54395,"method":"tools/call:search_docs","latencyMs":725.5,"ok":true,"concurrency":10},{"t":54398,"method":"tools/call:search_docs","latencyMs":1570.2,"ok":true,"concurrency":10},{"t":54434,"method":"tools/call:search_docs","latencyMs":621.15,"ok":true,"concurrency":10},{"t":54602,"method":"tools/call:search_docs","latencyMs":1184.97,"ok":true,"concurrency":10},{"t":54646,"method":"tools/call:search_docs","latencyMs":1279.91,"ok":true,"concurrency":10},{"t":54673,"method":"tools/call:search_docs","latencyMs":1906.51,"ok":true,"concurrency":10},{"t":55023,"method":"tools/call:search_docs","latencyMs":714.76,"ok":true,"concurrency":10},{"t":55128,"method":"tools/call:search_docs","latencyMs":814.94,"ok":true,"concurrency":10},{"t":55129,"method":"tools/call:search_docs","latencyMs":806.6,"ok":true,"concurrency":10},{"t":55180,"method":"tools/call:search_docs","latencyMs":1237.83,"ok":true,"concurrency":10},{"t":55385,"method":"tools/call:search_docs","latencyMs":989.86,"ok":true,"concurrency":10},{"t":55723,"method":"tools/call:search_docs","latencyMs":700.06,"ok":true,"concurrency":10},{"t":55821,"method":"tools/call:search_docs","latencyMs":1422.56,"ok":true,"concurrency":10},{"t":55822,"method":"tools/call:search_docs","latencyMs":693.81,"ok":true,"concurrency":10},{"t":55846,"method":"tools/call:search_docs","latencyMs":717.31,"ok":true,"concurrency":10},{"t":55948,"method":"tools/call:search_docs","latencyMs":1513.38,"ok":true,"concurrency":10},{"t":55975,"method":"tools/call:search_docs","latencyMs":1302.15,"ok":true,"concurrency":10},{"t":55990,"method":"tools/call:search_docs","latencyMs":1344.13,"ok":true,"concurrency":10},{"t":56015,"method":"tools/call:search_docs","latencyMs":834.63,"ok":true,"concurrency":10},{"t":56032,"method":"tools/call:search_docs","latencyMs":1429.82,"ok":true,"concurrency":10},{"t":56298,"method":"tools/call:search_docs","latencyMs":573.9,"ok":true,"concurrency":10},{"t":56429,"method":"tools/call:search_docs","latencyMs":607.98,"ok":true,"concurrency":10},{"t":56458,"method":"tools/call:search_docs","latencyMs":611.85,"ok":true,"concurrency":10},{"t":56569,"method":"tools/call:search_docs","latencyMs":1183.55,"ok":true,"concurrency":10},{"t":56573,"method":"tools/call:search_docs","latencyMs":750.97,"ok":true,"concurrency":10},{"t":56867,"method":"tools/call:search_docs","latencyMs":918.85,"ok":true,"concurrency":10},{"t":57003,"method":"tools/call:search_docs","latencyMs":1027.21,"ok":true,"concurrency":10},{"t":57892,"method":"tools/call:search_docs","latencyMs":889.58,"ok":true,"concurrency":15},{"t":57892,"method":"tools/call:search_docs","latencyMs":889.69,"ok":true,"concurrency":15},{"t":58267,"method":"tools/call:search_docs","latencyMs":1264.01,"ok":true,"concurrency":15},{"t":58296,"method":"tools/call:search_docs","latencyMs":1293.73,"ok":true,"concurrency":15},{"t":58720,"method":"tools/call:search_docs","latencyMs":1716.9,"ok":true,"concurrency":15},{"t":58728,"method":"tools/call:search_docs","latencyMs":1725.11,"ok":true,"concurrency":15},{"t":58729,"method":"tools/call:search_docs","latencyMs":1726.01,"ok":true,"concurrency":15},{"t":58753,"method":"tools/call:search_docs","latencyMs":1750.48,"ok":true,"concurrency":15},{"t":58755,"method":"tools/call:search_docs","latencyMs":1752.53,"ok":true,"concurrency":15},{"t":58765,"method":"tools/call:search_docs","latencyMs":872.85,"ok":true,"concurrency":15},{"t":58922,"method":"tools/call:search_docs","latencyMs":1919.48,"ok":true,"concurrency":15},{"t":58922,"method":"tools/call:search_docs","latencyMs":1919.57,"ok":true,"concurrency":15},{"t":58961,"method":"tools/call:search_docs","latencyMs":1068.17,"ok":true,"concurrency":15},{"t":58994,"method":"tools/call:search_docs","latencyMs":1991.42,"ok":true,"concurrency":15},{"t":59061,"method":"tools/call:search_docs","latencyMs":2058.33,"ok":true,"concurrency":15},{"t":59208,"method":"tools/call:search_docs","latencyMs":940.91,"ok":true,"concurrency":15},{"t":59245,"method":"tools/call:search_docs","latencyMs":2242.35,"ok":true,"concurrency":15},{"t":59301,"method":"tools/call:search_docs","latencyMs":1004.47,"ok":true,"concurrency":15},{"t":59474,"method":"tools/call:search_docs","latencyMs":2470.82,"ok":true,"concurrency":15},{"t":59609,"method":"tools/call:search_docs","latencyMs":879.76,"ok":true,"concurrency":15},{"t":59617,"method":"tools/call:search_docs","latencyMs":897.41,"ok":true,"concurrency":15},{"t":59940,"method":"tools/call:search_docs","latencyMs":1212.25,"ok":true,"concurrency":15},{"t":60289,"method":"tools/call:search_docs","latencyMs":815.16,"ok":true,"concurrency":15},{"t":60458,"method":"tools/call:search_docs","latencyMs":840.96,"ok":true,"concurrency":15},{"t":60657,"method":"tools/call:search_docs","latencyMs":1048.51,"ok":true,"concurrency":15},{"t":60855,"method":"tools/call:search_docs","latencyMs":1932.73,"ok":true,"concurrency":15},{"t":60856,"method":"tools/call:search_docs","latencyMs":2102.25,"ok":true,"concurrency":15},{"t":60916,"method":"tools/call:search_docs","latencyMs":1707.53,"ok":true,"concurrency":15},{"t":60962,"method":"tools/call:search_docs","latencyMs":2196.54,"ok":true,"concurrency":15},{"t":61019,"method":"tools/call:search_docs","latencyMs":2263.33,"ok":true,"concurrency":15},{"t":61021,"method":"tools/call:search_docs","latencyMs":2098.65,"ok":true,"concurrency":15},{"t":61078,"method":"tools/call:search_docs","latencyMs":789.37,"ok":true,"concurrency":15},{"t":61080,"method":"tools/call:search_docs","latencyMs":1835.05,"ok":true,"concurrency":15},{"t":61123,"method":"tools/call:search_docs","latencyMs":2162.19,"ok":true,"concurrency":15},{"t":61327,"method":"tools/call:search_docs","latencyMs":2332.98,"ok":true,"concurrency":15},{"t":61355,"method":"tools/call:search_docs","latencyMs":2293.79,"ok":true,"concurrency":15},{"t":61412,"method":"tools/call:search_docs","latencyMs":953.52,"ok":true,"concurrency":15},{"t":61423,"method":"tools/call:search_docs","latencyMs":2121.52,"ok":true,"concurrency":15},{"t":61647,"method":"tools/call:search_docs","latencyMs":1706.52,"ok":true,"concurrency":15},{"t":61768,"method":"tools/call:search_docs","latencyMs":852.05,"ok":true,"concurrency":15},{"t":61778,"method":"tools/call:search_docs","latencyMs":1120.55,"ok":true,"concurrency":15},{"t":61966,"method":"tools/call:search_docs","latencyMs":1110.29,"ok":true,"concurrency":15},{"t":62294,"method":"tools/call:search_docs","latencyMs":966.45,"ok":true,"concurrency":15},{"t":62312,"method":"tools/call:search_docs","latencyMs":956.78,"ok":true,"concurrency":15},{"t":62535,"method":"tools/call:search_docs","latencyMs":887.95,"ok":true,"concurrency":15},{"t":62726,"method":"tools/call:search_docs","latencyMs":1870.15,"ok":true,"concurrency":15},{"t":63013,"method":"tools/call:search_docs","latencyMs":1234.84,"ok":true,"concurrency":15},{"t":63065,"method":"tools/call:search_docs","latencyMs":1984.74,"ok":true,"concurrency":15},{"t":63162,"method":"tools/call:search_docs","latencyMs":2199.53,"ok":true,"concurrency":15},{"t":63215,"method":"tools/call:search_docs","latencyMs":2196.14,"ok":true,"concurrency":15},{"t":63215,"method":"tools/call:search_docs","latencyMs":921.53,"ok":true,"concurrency":15},{"t":63252,"method":"tools/call:search_docs","latencyMs":2173.89,"ok":true,"concurrency":15},{"t":63333,"method":"tools/call:search_docs","latencyMs":2210.2,"ok":true,"concurrency":15},{"t":63419,"method":"tools/call:search_docs","latencyMs":2007.38,"ok":true,"concurrency":15},{"t":63501,"method":"tools/call:search_docs","latencyMs":1189.05,"ok":true,"concurrency":15},{"t":63501,"method":"tools/call:search_docs","latencyMs":2480.04,"ok":true,"concurrency":15},{"t":63688,"method":"tools/call:search_docs","latencyMs":2265.02,"ok":true,"concurrency":15},{"t":63804,"method":"tools/call:search_docs","latencyMs":738.9,"ok":true,"concurrency":15},{"t":63822,"method":"tools/call:search_docs","latencyMs":1287.23,"ok":true,"concurrency":15},{"t":63989,"method":"tools/call:search_docs","latencyMs":2023.07,"ok":true,"concurrency":15},{"t":64006,"method":"tools/call:search_docs","latencyMs":2238.36,"ok":true,"concurrency":15},{"t":64034,"method":"tools/call:search_docs","latencyMs":871.96,"ok":true,"concurrency":15},{"t":64213,"method":"tools/call:search_docs","latencyMs":1200.34,"ok":true,"concurrency":15},{"t":64367,"method":"tools/call:search_docs","latencyMs":1114.72,"ok":true,"concurrency":15},{"t":64512,"method":"tools/call:search_docs","latencyMs":1296.89,"ok":true,"concurrency":15},{"t":64666,"method":"tools/call:search_docs","latencyMs":1939.67,"ok":true,"concurrency":15},{"t":64673,"method":"tools/call:search_docs","latencyMs":984.37,"ok":true,"concurrency":15},{"t":65227,"method":"tools/call:search_docs","latencyMs":1404.78,"ok":true,"concurrency":15},{"t":65241,"method":"tools/call:search_docs","latencyMs":1234.2,"ok":true,"concurrency":15},{"t":65261,"method":"tools/call:search_docs","latencyMs":1927.42,"ok":true,"concurrency":15},{"t":65299,"method":"tools/call:search_docs","latencyMs":2083.92,"ok":true,"concurrency":15},{"t":65404,"method":"tools/call:search_docs","latencyMs":892.37,"ok":true,"concurrency":15},{"t":65423,"method":"tools/call:search_docs","latencyMs":1434.35,"ok":true,"concurrency":15},{"t":65444,"method":"tools/call:search_docs","latencyMs":1077.3,"ok":true,"concurrency":15},{"t":65481,"method":"tools/call:search_docs","latencyMs":1979.79,"ok":true,"concurrency":15},{"t":65748,"method":"tools/call:search_docs","latencyMs":2327.99,"ok":true,"concurrency":15},{"t":65768,"method":"tools/call:search_docs","latencyMs":1554.47,"ok":true,"concurrency":15},{"t":65980,"method":"tools/call:search_docs","latencyMs":2478.98,"ok":true,"concurrency":15},{"t":66018,"method":"tools/call:search_docs","latencyMs":1983.94,"ok":true,"concurrency":15},{"t":66058,"method":"tools/call:search_docs","latencyMs":817.06,"ok":true,"concurrency":15},{"t":66085,"method":"tools/call:search_docs","latencyMs":824.57,"ok":true,"concurrency":15},{"t":66187,"method":"tools/call:search_docs","latencyMs":2382.78,"ok":true,"concurrency":15},{"t":66297,"method":"tools/call:search_docs","latencyMs":997.49,"ok":true,"concurrency":15},{"t":66337,"method":"tools/call:search_docs","latencyMs":1109.62,"ok":true,"concurrency":15},{"t":66374,"method":"tools/call:search_docs","latencyMs":1700.82,"ok":true,"concurrency":15},{"t":66557,"method":"tools/call:search_docs","latencyMs":1890.67,"ok":true,"concurrency":15},{"t":66610,"method":"tools/call:search_docs","latencyMs":629.92,"ok":true,"concurrency":15},{"t":66725,"method":"tools/call:search_docs","latencyMs":1243.81,"ok":true,"concurrency":15},{"t":66739,"method":"tools/call:search_docs","latencyMs":971.45,"ok":true,"concurrency":15},{"t":66805,"method":"tools/call:search_docs","latencyMs":1359.98,"ok":true,"concurrency":15},{"t":66970,"method":"tools/call:search_docs","latencyMs":1547.09,"ok":true,"concurrency":15},{"t":67019,"method":"tools/call:search_docs","latencyMs":1270.99,"ok":true,"concurrency":15},{"t":67045,"method":"tools/call:search_docs","latencyMs":1640.44,"ok":true,"concurrency":15}],"windows":[{"t":0,"count":1,"errors":0,"p50":550.53,"p95":550.53,"p99":550.53,"mean":550.53,"concurrency":1},{"t":1,"count":3,"errors":0,"p50":448.81,"p95":483.307,"p99":486.3734,"mean":443.80999999999995,"concurrency":1},{"t":2,"count":2,"errors":0,"p50":444.21500000000003,"p95":498.2915,"p99":503.0983,"mean":444.21500000000003,"concurrency":1},{"t":3,"count":3,"errors":0,"p50":394.45,"p95":410.2,"p99":411.59999999999997,"mean":393.19,"concurrency":1},{"t":4,"count":1,"errors":0,"p50":795.42,"p95":795.42,"p99":795.42,"mean":795.42,"concurrency":1},{"t":5,"count":2,"errors":0,"p50":379.93,"p95":382.351,"p99":382.5662,"mean":379.93,"concurrency":1},{"t":6,"count":2,"errors":0,"p50":677.515,"p95":945.6025,"p99":969.4325,"mean":677.515,"concurrency":1},{"t":7,"count":2,"errors":0,"p50":424.145,"p95":447.7115,"p99":449.80629999999996,"mean":424.145,"concurrency":1},{"t":8,"count":3,"errors":0,"p50":385.48,"p95":433.423,"p99":437.6846,"mean":401.4466666666667,"concurrency":1},{"t":9,"count":3,"errors":0,"p50":429.58,"p95":631.882,"p99":649.8644,"mean":486.8666666666666,"concurrency":1},{"t":10,"count":5,"errors":0,"p50":419.99,"p95":572.0759999999999,"p99":599.3592,"mean":448.788,"concurrency":2},{"t":11,"count":4,"errors":0,"p50":481.36,"p95":660.4695,"p99":674.7579000000001,"mean":506.53,"concurrency":2},{"t":12,"count":3,"errors":0,"p50":597.67,"p95":802.492,"p99":820.6984,"mean":608.8433333333334,"concurrency":2},{"t":13,"count":4,"errors":0,"p50":404.78,"p95":534.096,"p99":551.4911999999999,"mean":437.5350000000001,"concurrency":2},{"t":14,"count":3,"errors":0,"p50":408.93,"p95":435.33599999999996,"p99":437.6832,"mean":416.74333333333334,"concurrency":2},{"t":15,"count":5,"errors":0,"p50":631.84,"p95":818.668,"p99":838.6456,"mean":599.9079999999999,"concurrency":2},{"t":16,"count":4,"errors":0,"p50":532.135,"p95":622.2574999999999,"p99":623.5715,"mean":519.4725,"concurrency":2},{"t":17,"count":4,"errors":0,"p50":402.54499999999996,"p95":541.343,"p99":560.4206,"mean":440.55,"concurrency":2},{"t":18,"count":3,"errors":0,"p50":570.35,"p95":599.807,"p99":602.4254000000001,"mean":520.79,"concurrency":2},{"t":19,"count":5,"errors":0,"p50":466.65,"p95":807.626,"p99":861.0452,"mean":541.2819999999999,"concurrency":3},{"t":20,"count":5,"errors":0,"p50":619.46,"p95":807.252,"p99":826.5544,"mean":609.274,"concurrency":3},{"t":21,"count":6,"errors":0,"p50":421.905,"p95":569.5775,"p99":601.7075,"mean":446.13666666666677,"concurrency":3},{"t":22,"count":7,"errors":0,"p50":437.18,"p95":805.1219999999998,"p99":829.6643999999999,"mean":523.4557142857142,"concurrency":3},{"t":23,"count":7,"errors":0,"p50":453.79,"p95":464.561,"p99":467.0402,"mean":437.82714285714286,"concurrency":3},{"t":24,"count":5,"errors":0,"p50":451.41,"p95":528.602,"p99":528.9284,"mean":481.588,"concurrency":3},{"t":25,"count":6,"errors":0,"p50":431.64,"p95":620.2475,"p99":661.9295000000001,"mean":469.9833333333333,"concurrency":3},{"t":26,"count":6,"errors":0,"p50":507.4,"p95":648.7099999999999,"p99":653.99,"mean":534.905,"concurrency":3},{"t":27,"count":8,"errors":0,"p50":431.105,"p95":608.6469999999999,"p99":673.4893999999999,"mean":462.33375,"concurrency":3},{"t":28,"count":6,"errors":0,"p50":547.675,"p95":800.3149999999999,"p99":823.383,"mean":586.3016666666666,"concurrency":4},{"t":29,"count":7,"errors":0,"p50":524.4,"p95":558.6220000000001,"p99":564.6844,"mean":497.7085714285714,"concurrency":4},{"t":30,"count":8,"errors":0,"p50":501.765,"p95":671.5215000000001,"p99":672.8963,"mean":534.635,"concurrency":4},{"t":31,"count":7,"errors":0,"p50":484.28,"p95":623.929,"p99":632.6578000000001,"mean":509.32,"concurrency":4},{"t":32,"count":7,"errors":0,"p50":453.39,"p95":837.047,"p99":861.1694,"mean":540.7128571428572,"concurrency":4},{"t":33,"count":9,"errors":0,"p50":527.77,"p95":746.1759999999999,"p99":776.5152,"mean":556.9877777777779,"concurrency":4},{"t":34,"count":6,"errors":0,"p50":511,"p95":570.7049999999999,"p99":581.557,"mean":512.7966666666667,"concurrency":4},{"t":35,"count":7,"errors":0,"p50":535.51,"p95":700.257,"p99":705.7794,"mean":559.7928571428571,"concurrency":4},{"t":36,"count":7,"errors":0,"p50":515.21,"p95":825.7829999999999,"p99":849.9966,"mean":608.6528571428571,"concurrency":4},{"t":37,"count":4,"errors":0,"p50":550.02,"p95":679.8645,"p99":683.6768999999999,"mean":541.3475000000001,"concurrency":4},{"t":38,"count":9,"errors":0,"p50":639.6,"p95":955.4419999999999,"p99":1047.6564,"mean":681.89,"concurrency":5},{"t":39,"count":8,"errors":0,"p50":463.9,"p95":726.8,"p99":737.328,"mean":533.98875,"concurrency":5},{"t":40,"count":9,"errors":0,"p50":540.72,"p95":855.3119999999999,"p99":930.9504,"mean":597.3133333333333,"concurrency":5},{"t":41,"count":9,"errors":0,"p50":540.19,"p95":732.11,"p99":752.8299999999999,"mean":563.1455555555556,"concurrency":5},{"t":42,"count":9,"errors":0,"p50":561.33,"p95":933.736,"p99":1019.4832,"mean":619.6611111111112,"concurrency":5},{"t":43,"count":9,"errors":0,"p50":554.63,"p95":630.442,"p99":644.3684000000001,"mean":556.8266666666667,"concurrency":5},{"t":44,"count":6,"errors":0,"p50":561.125,"p95":598.1725,"p99":598.8985,"mean":558.0383333333333,"concurrency":5},{"t":45,"count":10,"errors":0,"p50":640.86,"p95":897.3024999999999,"p99":925.0765,"mean":648.1360000000001,"concurrency":5},{"t":46,"count":9,"errors":0,"p50":489.7,"p95":835.39,"p99":852.366,"mean":573.4922222222222,"concurrency":5},{"t":47,"count":3,"errors":0,"p50":766.07,"p95":809.9359999999999,"p99":813.8352,"mean":746.43,"concurrency":10},{"t":48,"count":12,"errors":0,"p50":1328.435,"p95":1688.4679999999998,"p99":1859.8216000000002,"mean":1143.5525,"concurrency":10},{"t":49,"count":8,"errors":0,"p50":912.54,"p95":1384.162,"p99":1385.0244,"mean":1019.71875,"concurrency":10},{"t":50,"count":9,"errors":0,"p50":883.68,"p95":1744.5459999999998,"p99":1785.3172,"mean":1028.8966666666665,"concurrency":10},{"t":51,"count":11,"errors":0,"p50":812.69,"p95":1699.34,"p99":1726.932,"mean":1087.4745454545455,"concurrency":10},{"t":52,"count":9,"errors":0,"p50":1164.87,"p95":1533.954,"p99":1534.4307999999999,"mean":1096.051111111111,"concurrency":10},{"t":53,"count":9,"errors":0,"p50":828.8,"p95":1423.6539999999998,"p99":1532.3388,"mean":931.3344444444444,"concurrency":10},{"t":54,"count":9,"errors":0,"p50":1184.97,"p95":1771.9859999999999,"p99":1879.6052,"mean":1184.1833333333334,"concurrency":10},{"t":55,"count":12,"errors":0,"p50":902.4000000000001,"p95":1463.4289999999999,"p99":1503.3898000000002,"mean":1021.4491666666667,"concurrency":10},{"t":56,"count":8,"errors":0,"p50":792.8,"p95":1343.6254999999999,"p99":1412.5810999999999,"mean":863.94375,"concurrency":10},{"t":57,"count":3,"errors":0,"p50":889.69,"p95":1013.4580000000001,"p99":1024.4596000000001,"mean":935.4933333333333,"concurrency":10},{"t":58,"count":12,"errors":0,"p50":1725.56,"p95":1951.9025,"p99":1983.5165000000002,"mean":1583.3550000000002,"concurrency":15},{"t":59,"count":8,"errors":0,"p50":1108.3600000000001,"p95":2390.8555,"p99":2454.8271,"mean":1463.2875,"concurrency":15},{"t":60,"count":7,"errors":0,"p50":1707.53,"p95":2168.2529999999997,"p99":2190.8826,"mean":1520.5257142857142,"concurrency":15},{"t":61,"count":13,"errors":0,"p50":1835.05,"p95":2309.466,"p99":2328.2772,"mean":1664.6007692307694,"concurrency":15},{"t":62,"count":4,"errors":0,"p50":961.615,"p95":1734.5949999999998,"p99":1843.0389999999998,"mean":1170.3325,"concurrency":15},{"t":63,"count":14,"errors":0,"p50":2015.225,"p95":2340.277,"p99":2452.0874,"mean":1779.3971428571426,"concurrency":15},{"t":64,"count":7,"errors":0,"p50":1200.34,"p95":2148.7529999999997,"p99":2220.4386,"mean":1378.044285714286,"concurrency":15},{"t":65,"count":11,"errors":0,"p50":1554.47,"p95":2403.4849999999997,"p99":2463.881,"mean":1672.3245454545454,"concurrency":15},{"t":66,"count":13,"errors":0,"p50":1243.81,"p95":2143.4759999999997,"p99":2334.9192,"mean":1343.0153846153846,"concurrency":15},{"t":67,"count":2,"errors":0,"p50":1455.7150000000001,"p95":1621.9675,"p99":1636.7455,"mean":1455.7150000000001,"concurrency":15}],"methods":["tools/call:search_docs"],"hasConcurrency":true,"source":"test-run.ndjson","meta":{"type":"meta","scenario":"find-ceiling","concurrency":30,"durationSec":90,"tool":"search_docs","serverCommand":"node","serverArgs":["/Users/sam/Development/dgellow/mcp-stress/sam-stress-testing-typescript/packages/mcp-server/dist/index.js"],"seed":42,"startedAt":"2026-02-21T13:46:35.643Z","timeoutMs":30000},"concChanges":[{"t":0,"from":0,"to":1},{"t":10,"from":1,"to":2},{"t":19,"from":2,"to":3},{"t":28,"from":3,"to":4},{"t":38,"from":4,"to":5},{"t":47,"from":5,"to":10},{"t":58,"from":10,"to":15}],"anomalies":[{"t":48,"latencyMs":1859.8216000000002,"rollingMean":607.8921972222222}],"reproCmd":"deno run -A main.ts stress -s find-ceiling -d 90 -c 30 -t 30000 --tool search_docs --seed 42 -o results.ndjson -- node /Users/sam/Development/dgellow/mcp-stress/sam-stress-testing-typescript/packages/mcp-server/dist/index.js","totalRequests":442,"totalErrors":0,"durationSec":67.045,"overallP50":656.8599999999999,"overallP95":2022.2854999999997,"overallP99":2330.9341,"overallMean":850.4064479638006,"overallMin":373.17,"overallMax":2480.04};
// â”€â”€â”€ Theme â”€â”€â”€
let isDark = true;
function getTheme() {
  const s = getComputedStyle(document.documentElement);
  return {
    paper_bgcolor: s.getPropertyValue('--bg-card').trim(),
    plot_bgcolor: s.getPropertyValue('--bg-card').trim(),
    font: { color: s.getPropertyValue('--text').trim(), size: 11 },
    xaxis: { gridcolor: s.getPropertyValue('--grid').trim(), zerolinecolor: s.getPropertyValue('--zeroline').trim() },
    yaxis: { gridcolor: s.getPropertyValue('--grid').trim(), zerolinecolor: s.getPropertyValue('--zeroline').trim() },
    margin: { l: 50, r: 20, t: 40, b: 40 },
  };
}
let dark = getTheme();
const cfg = { displayModeBar: true, responsive: true, modeBarButtonsToRemove: ['lasso2d', 'select2d'] };

const plotIds = ['throughput', 'latency-time', 'latency-hist', 'latency-box', 'concurrency'];
document.getElementById('theme-toggle').addEventListener('click', function() {
  isDark = !isDark;
  document.documentElement.setAttribute('data-theme', isDark ? '' : 'light');
  if (!isDark) document.documentElement.setAttribute('data-theme', 'light');
  else document.documentElement.removeAttribute('data-theme');
  this.textContent = isDark ? 'Light mode' : 'Dark mode';
  dark = getTheme();
  // Update all plotly charts
  for (const id of plotIds) {
    const el = document.getElementById(id);
    if (el && el.data) {
      Plotly.relayout(id, {
        paper_bgcolor: dark.paper_bgcolor, plot_bgcolor: dark.plot_bgcolor,
        font: dark.font,
        'xaxis.gridcolor': dark.xaxis.gridcolor, 'xaxis.zerolinecolor': dark.xaxis.zerolinecolor,
        'yaxis.gridcolor': dark.yaxis.gridcolor, 'yaxis.zerolinecolor': dark.yaxis.zerolinecolor,
      });
    }
  }
});

// â”€â”€â”€ Keyword glossary â”€â”€â”€
const KW = {
  'p50': { tip: '50th percentile (median). Half of all requests completed faster than this.', plot: 'latency-time', trace: 1, color: '#3fb950' },
  'p95': { tip: '95th percentile. Only 5% of requests were slower than this.', plot: 'latency-time', trace: 2, color: '#d29922' },
  'p99': { tip: '99th percentile. Only 1% of requests were slower. This is your worst-case for most users.', plot: 'latency-time', trace: 3, color: '#da3633' },
  'median': { tip: 'The middle value â€” 50% of requests are faster, 50% slower. Same as p50.', plot: 'latency-time', trace: 1, color: '#3fb950' },
  'tail latency': { tip: 'The gap between typical (p50) and worst-case (p99) latency. A long tail means unpredictable performance for some users.', plot: 'latency-time', trace: 3, color: '#da3633' },
  'throughput': { tip: 'Requests completed per second. Higher is better. Plateaus indicate the server\'s capacity limit.', plot: 'throughput', trace: 0, color: '#238636' },
  'req/s': { tip: 'Requests per second â€” the rate at which the server processes work.', plot: 'throughput', trace: 0, color: '#238636' },
  'concurrency': { tip: 'Number of simultaneous in-flight requests. Higher concurrency tests how the server handles parallel load.', plot: 'concurrency', trace: 1, color: '#bc8cff' },
  'IQR': { tip: 'Interquartile Range â€” the span from p25 to p75, covering the middle 50% of latencies. A narrow IQR means consistent performance; a wide one means high variance.', plot: 'latency-box', trace: 0, color: '#58a6ff' },
  'rolling mean': { tip: 'Average latency over a sliding 10-second window. Anomalies are detected when p99 exceeds 3x this value.', plot: 'latency-time', trace: 1, color: '#3fb950' },
  'CV': { tip: 'Coefficient of Variation â€” standard deviation divided by mean. Below 20% = stable, above 50% = volatile.', plot: 'throughput', trace: 0, color: '#238636' },
  'error rate': { tip: 'Percentage of requests that returned errors. Any sustained error rate above 1% warrants investigation.', plot: 'throughput', trace: 1, color: '#da3633' },
  'saturation': { tip: 'The point where adding more concurrency no longer increases throughput â€” only latency. This is the server\'s practical limit.', plot: 'concurrency', trace: 0, color: '#238636' },
};
function kw(word, displayText) {
  const entry = KW[word];
  if (!entry) return displayText || word;
  const label = displayText || word;
  return '<span class="kw" data-kw-plot="' + entry.plot + '" data-kw-trace="' + entry.trace + '" data-kw-color="' + entry.color + '">' + label + '<span class="kw-tip">' + entry.tip + '</span></span>';
}

// keyword tooltip positioning
document.addEventListener('mouseover', function(e) {
  const kwEl = e.target.closest('.kw');
  if (!kwEl) return;
  const tip = kwEl.querySelector('.kw-tip');
  if (!tip) return;
  const rect = kwEl.getBoundingClientRect();
  tip.classList.add('visible');
  // Position above the keyword, centered
  let top = rect.top - tip.offsetHeight - 6;
  let left = rect.left + rect.width / 2 - tip.offsetWidth / 2;
  // If clipped at top, show below
  if (top < 4) top = rect.bottom + 6;
  // Clamp horizontal
  if (left < 4) left = 4;
  if (left + tip.offsetWidth > window.innerWidth - 4) left = window.innerWidth - tip.offsetWidth - 4;
  tip.style.top = top + 'px';
  tip.style.left = left + 'px';
});
document.addEventListener('mouseout', function(e) {
  const kwEl = e.target.closest('.kw');
  if (!kwEl) return;
  if (kwEl.contains(e.relatedTarget)) return;
  const tip = kwEl.querySelector('.kw-tip');
  if (tip) tip.classList.remove('visible');
});

// keyword hover â†’ highlight trace
// Track default opacities per plot so we can restore them
const defaultOpacities = {};
function storeDefaults(plotId) {
  const el = document.getElementById(plotId);
  if (!el || !el.data || defaultOpacities[plotId]) return;
  defaultOpacities[plotId] = el.data.map(t => t.opacity !== undefined ? t.opacity : 1);
}

document.addEventListener('mouseover', function(e) {
  const el = e.target.closest('.kw[data-kw-plot]');
  if (!el) return;
  const plotId = el.getAttribute('data-kw-plot');
  const traceIdx = parseInt(el.getAttribute('data-kw-trace'));
  const plotEl = document.getElementById(plotId);
  if (!plotEl || !plotEl.data || traceIdx >= plotEl.data.length) return;
  storeDefaults(plotId);
  // Colorize the keyword underline
  el.style.borderBottomColor = el.getAttribute('data-kw-color');
  for (let i = 0; i < plotEl.data.length; i++) {
    Plotly.restyle(plotId, { opacity: i === traceIdx ? 1 : 0.08 }, [i]);
  }
});
document.addEventListener('mouseout', function(e) {
  const el = e.target.closest('.kw[data-kw-plot]');
  if (!el) return;
  // Reset underline color
  el.style.borderBottomColor = '';
  const plotId = el.getAttribute('data-kw-plot');
  const plotEl = document.getElementById(plotId);
  if (!plotEl || !plotEl.data) return;
  const defaults = defaultOpacities[plotId] || plotEl.data.map(() => 1);
  for (let i = 0; i < plotEl.data.length; i++) {
    Plotly.restyle(plotId, { opacity: defaults[i] }, [i]);
  }
});

// â”€â”€â”€ Legend helper â”€â”€â”€
function legendItem(plotId, traceIndex, color, label, style) {
  const dotStyle = style === 'warn' ? 'color:' + color + ';font-size:12px' : 'background:' + color;
  const dotEl = style === 'warn' ? '<span style="' + dotStyle + '">âš </span>' : '<span class="legend-dot" style="' + dotStyle + '"></span>';
  return '<span class="legend-item" data-plot="' + plotId + '" data-trace="' + traceIndex + '">' + dotEl + ' ' + label + '</span>';
}
document.addEventListener('click', function(e) {
  const item = e.target.closest('.legend-item[data-plot]');
  if (!item) return;
  const plotId = item.getAttribute('data-plot');
  const traceIdx = parseInt(item.getAttribute('data-trace'));
  const el = document.getElementById(plotId);
  if (!el || !el.data || !el.data[traceIdx]) return;
  const current = el.data[traceIdx].visible;
  const next = current === 'legendonly' ? true : 'legendonly';
  Plotly.restyle(plotId, { visible: next }, [traceIdx]);
  item.classList.toggle('hidden', next === 'legendonly');
});

// â”€â”€â”€ Insight hover highlights â”€â”€â”€
let activeHighlight = null;
document.addEventListener('mouseover', function(e) {
  const insight = e.target.closest('.insight[data-highlight]');
  if (!insight) return;
  if (activeHighlight === insight) return;
  activeHighlight = insight;

  const plotId = insight.getAttribute('data-highlight');
  const regionStart = parseFloat(insight.getAttribute('data-region-start') || '0');
  const regionEnd = parseFloat(insight.getAttribute('data-region-end') || '0');
  const compareStart = insight.getAttribute('data-compare-start');
  const compareEnd = insight.getAttribute('data-compare-end');
  const traceIdxs = (insight.getAttribute('data-traces') || '').split(',').map(Number);

  // Dim all traces except the highlighted ones
  const el = document.getElementById(plotId);
  if (!el || !el.data) return;
  const updates = {};
  for (let i = 0; i < el.data.length; i++) {
    const isHighlighted = traceIdxs.includes(i);
    Plotly.restyle(plotId, { opacity: isHighlighted ? 1 : 0.15 }, [i]);
  }

  // Add highlight rectangle(s)
  const shapes = (el.layout.shapes || []).filter(s => !s._isHighlight);
  shapes.push({
    type: 'rect', xref: 'x', yref: 'paper', x0: regionStart, x1: regionEnd, y0: 0, y1: 1,
    fillcolor: 'rgba(88,166,255,0.08)', line: { color: 'rgba(88,166,255,0.4)', width: 1 }, _isHighlight: true,
  });
  if (compareStart && compareEnd) {
    shapes.push({
      type: 'rect', xref: 'x', yref: 'paper', x0: parseFloat(compareStart), x1: parseFloat(compareEnd), y0: 0, y1: 1,
      fillcolor: 'rgba(88,166,255,0.04)', line: { color: 'rgba(88,166,255,0.2)', width: 1, dash: 'dot' }, _isHighlight: true,
    });
  }
  Plotly.relayout(plotId, { shapes: shapes });
});
document.addEventListener('mouseout', function(e) {
  const insight = e.target.closest('.insight[data-highlight]');
  if (!insight || !activeHighlight) return;
  // Check if we're moving to a child element
  if (insight.contains(e.relatedTarget)) return;
  activeHighlight = null;

  const plotId = insight.getAttribute('data-highlight');
  const el = document.getElementById(plotId);
  if (!el || !el.data) return;

  // Restore all traces
  for (let i = 0; i < el.data.length; i++) {
    Plotly.restyle(plotId, { opacity: i === 0 ? 0.4 : 1 }, [i]);
  }
  // Remove highlight shapes
  const shapes = (el.layout.shapes || []).filter(s => !s._isHighlight);
  Plotly.relayout(plotId, { shapes: shapes });
});

// â”€â”€â”€ Copy repro command (delegated, element created later) â”€â”€â”€
document.addEventListener('click', function(e) {
  const repro = e.target.closest('#repro-cmd');
  if (!repro) return;
  const hint = document.getElementById('repro-hint');
  if (!hint) return;
  const text = repro.textContent.replace(hint.textContent, '').trim();
  navigator.clipboard.writeText(text).then(function() {
    hint.textContent = 'copied!';
    hint.classList.add('copied');
    setTimeout(function() { hint.textContent = 'click to copy'; hint.classList.remove('copied'); }, 2000);
  });
});

// â”€â”€â”€ Header â”€â”€â”€
document.getElementById('meta').textContent =
  (D.meta ? D.meta.scenario + ' | ' : '') +
  D.totalRequests + ' requests over ' + D.durationSec.toFixed(1) + 's' +
  (D.meta ? ' | ' + D.meta.startedAt : '') +
  ' | source: ' + D.source;

// â”€â”€â”€ Stats bar â”€â”€â”€
const rps = D.totalRequests / D.durationSec;
const errRate = D.totalErrors / D.totalRequests * 100;
const errClass = errRate > 5 ? 'bad' : errRate > 1 ? 'warn' : '';
document.getElementById('stats').innerHTML =
  stat(rps.toFixed(1), 'avg req/s') +
  stat(D.totalRequests, 'total requests') +
  stat(D.overallP50.toFixed(0) + 'ms', 'p50 latency') +
  stat(D.overallP95.toFixed(0) + 'ms', 'p95 latency') +
  stat(D.overallP99.toFixed(0) + 'ms', 'p99 latency') +
  stat(D.overallMin.toFixed(0) + 'ms', 'min') +
  stat(D.overallMax.toFixed(0) + 'ms', 'max') +
  '<div class="stat"><div class="value ' + errClass + '">' + errRate.toFixed(1) + '%</div><div class="label">error rate</div></div>';

function stat(v, l) { return '<div class="stat"><div class="value">' + v + '</div><div class="label">' + l + '</div></div>'; }
function pct(arr, p) { if (!arr.length) return 0; const i = p*(arr.length-1); const lo = Math.floor(i), hi = Math.ceil(i); return lo===hi ? arr[lo] : arr[lo]+(arr[hi]-arr[lo])*(i-lo); }

// â”€â”€â”€ Run parameters â”€â”€â”€
{
  let html = '<h2>Run parameters</h2><dl class="params">';
  if (D.meta) {
    const m = D.meta;
    html += kv('Scenario', m.scenario);
    html += kv('Duration', m.durationSec + 's');
    html += kv('Concurrency', m.concurrency);
    if (m.shape) html += kv('Shape', m.shape);
    if (m.tool) html += kv('Tool', m.tool);
    html += kv('Timeout', m.timeoutMs + 'ms');
    html += kv('Seed', m.seed);
    html += kv('Server', m.serverCommand + ' ' + m.serverArgs.join(' '));
    html += kv('Started', m.startedAt);
  } else {
    html += kv('Source', D.source);
    html += kv('Note', 'No metadata found in NDJSON. Re-run with latest mcp-stress for full metadata.');
  }
  html += '</dl>';
  html += '<div class="repro" id="repro-cmd">' + D.reproCmd + '<span class="repro-hint" id="repro-hint">click to copy</span></div>';
  document.getElementById('run-params').innerHTML = html;
}
function kv(k, v) { return '<dt>' + k + '</dt><dd>' + v + '</dd>'; }

// â”€â”€â”€ Concurrency change annotations â”€â”€â”€
const annotations = D.concChanges.map(c => ({
  x: c.t, yref: 'paper', y: 1, ay: 0, yanchor: 'bottom',
  text: 'c=' + c.to, showarrow: true, arrowhead: 0, arrowcolor: '#bc8cff',
  font: { size: 10, color: '#bc8cff' }, bgcolor: '#161b22', bordercolor: '#bc8cff',
}));
const concShapes = D.concChanges.map(c => ({
  type: 'line', x0: c.t, x1: c.t, yref: 'paper', y0: 0, y1: 1,
  line: { color: '#bc8cff', width: 1, dash: 'dash' },
}));

// â”€â”€â”€ Anomaly markers â”€â”€â”€
const anomalyShapes = D.anomalies.map(a => ({
  type: 'rect', x0: a.t - 0.3, x1: a.t + 0.3, yref: 'paper', y0: 0, y1: 1,
  fillcolor: 'rgba(240,136,62,0.1)', line: { width: 0 },
}));
const anomalyAnnotations = D.anomalies.map(a => ({
  x: a.t, yref: 'paper', y: 1.02, yanchor: 'bottom', showarrow: false,
  text: 'âš ', font: { size: 12, color: '#f0883e' },
}));

// â”€â”€â”€ Throughput â”€â”€â”€
{
  const traces = [{
    x: D.windows.map(w => w.t), y: D.windows.map(w => w.count),
    type: 'bar', marker: { color: '#238636' }, name: 'req/s',
  }];
  if (D.windows.some(w => w.errors > 0)) {
    traces.push({
      x: D.windows.map(w => w.t), y: D.windows.map(w => w.errors),
      type: 'bar', marker: { color: '#da3633' }, name: 'errors/s',
    });
  }
  Plotly.newPlot('throughput', traces, {
    ...dark, title: { text: 'Throughput over time' },
    xaxis: { ...dark.xaxis, title: { text: 'Time (s)' } }, yaxis: { ...dark.yaxis, title: { text: 'Requests' } },
    barmode: 'overlay', showlegend: false, shapes: concShapes, annotations,
  }, cfg);
}

// â”€â”€â”€ Latency over time â”€â”€â”€
{
  const scatter = {
    x: D.events.map(e => e.t / 1000), y: D.events.map(e => e.latencyMs),
    mode: 'markers', type: 'scatter',
    marker: { size: 3, color: D.events.map(e => e.ok ? '#58a6ff' : '#da3633'), opacity: 0.4 },
    name: 'requests', hovertemplate: '%{y:.0f}ms at %{x:.1f}s<extra></extra>',
  };
  const p50 = { x: D.windows.map(w => w.t), y: D.windows.map(w => w.p50), mode: 'lines', line: { color: '#3fb950', width: 2 }, name: 'p50' };
  const p95 = { x: D.windows.map(w => w.t), y: D.windows.map(w => w.p95), mode: 'lines', line: { color: '#d29922', width: 2 }, name: 'p95' };
  const p99 = { x: D.windows.map(w => w.t), y: D.windows.map(w => w.p99), mode: 'lines', line: { color: '#da3633', width: 2 }, name: 'p99' };
  Plotly.newPlot('latency-time', [scatter, p50, p95, p99], {
    ...dark, title: { text: 'Latency over time' },
    xaxis: { ...dark.xaxis, title: { text: 'Time (s)' } }, yaxis: { ...dark.yaxis, title: { text: 'Latency (ms)' } },
    showlegend: false, shapes: [...concShapes, ...anomalyShapes], annotations: [...annotations, ...anomalyAnnotations],
  }, cfg);
}

// â”€â”€â”€ Histogram â”€â”€â”€
{
  const traces = D.methods.map(m => ({
    x: D.events.filter(e => e.method === m).map(e => e.latencyMs),
    type: 'histogram', name: m, opacity: 0.7, nbinsx: 50,
  }));
  Plotly.newPlot('latency-hist', traces, {
    ...dark, title: { text: 'Latency distribution' },
    xaxis: { ...dark.xaxis, title: { text: 'Latency (ms)' } }, yaxis: { ...dark.yaxis, title: { text: 'Count' } },
    barmode: 'overlay', showlegend: false,
  }, cfg);
}

// â”€â”€â”€ Box plot â”€â”€â”€
{
  const traces = D.methods.map(m => ({
    y: D.events.filter(e => e.method === m).map(e => e.latencyMs),
    type: 'box', name: m.length > 30 ? '...' + m.slice(-30) : m,
    marker: { color: '#58a6ff' }, boxpoints: false,
  }));
  Plotly.newPlot('latency-box', traces, {
    ...dark, title: { text: 'Latency by method' }, yaxis: { ...dark.yaxis, title: { text: 'Latency (ms)' } }, showlegend: false,
  }, cfg);
}

// â”€â”€â”€ Concurrency chart â”€â”€â”€
if (D.hasConcurrency && document.getElementById('concurrency')) {
  const conc = { x: D.windows.map(w => w.t), y: D.windows.map(w => w.concurrency), mode: 'lines+markers', line: { color: '#bc8cff', width: 2 }, name: 'concurrency', yaxis: 'y2' };
  const rps = { x: D.windows.map(w => w.t), y: D.windows.map(w => w.count), type: 'bar', marker: { color: '#238636', opacity: 0.5 }, name: 'req/s' };
  const lat = { x: D.windows.map(w => w.t), y: D.windows.map(w => w.p50), mode: 'lines', line: { color: '#d29922', width: 2 }, name: 'p50 latency', yaxis: 'y3' };

  Plotly.newPlot('concurrency', [rps, conc, lat], {
    ...dark, title: { text: 'Concurrency vs Throughput vs Latency' },
    xaxis: { ...dark.xaxis, title: { text: 'Time (s)' }, domain: [0.05, 0.9] },
    yaxis: { ...dark.yaxis, title: { text: 'Requests/s' }, side: 'left' },
    yaxis2: { ...dark.yaxis, title: { text: 'Concurrency' }, overlaying: 'y', side: 'right', showgrid: false },
    yaxis3: { ...dark.yaxis, title: { text: 'p50 (ms)' }, overlaying: 'y', side: 'right', position: 0.95, showgrid: false },
    showlegend: false, shapes: concShapes, annotations,
  }, cfg);
}

// â”€â”€â”€ Data-driven help text per chart â”€â”€â”€
{
  // Throughput insights
  const rpsValues = D.windows.map(w => w.count);
  const peakRps = Math.max(...rpsValues);
  const avgRps = rpsValues.reduce((a,b) => a+b, 0) / rpsValues.length;
  const rpsVariance = rpsValues.reduce((s,v) => s + (v - avgRps) ** 2, 0) / rpsValues.length;
  const rpsStddev = Math.sqrt(rpsVariance);
  const rpsCV = avgRps > 0 ? rpsStddev / avgRps : 0; // coefficient of variation

  let tpHtml = '<span class="title">Throughput over time</span>';
  tpHtml += '<div class="legend">';
  tpHtml += legendItem('throughput', 0, '#238636', 'requests/sec');
  if (D.windows.some(w => w.errors > 0)) tpHtml += legendItem('throughput', 1, '#da3633', 'errors/sec');
  tpHtml += '</div>';

  tpHtml += '<div class="insight ' + (rpsCV < 0.3 ? 'good' : rpsCV < 0.6 ? 'warn' : 'bad') + '">';
  tpHtml += 'Peak: <strong>' + peakRps + ' ' + kw('req/s') + '</strong>, avg: <strong>' + avgRps.toFixed(1) + ' ' + kw('req/s') + '</strong>. ';
  if (rpsCV < 0.2) tpHtml += 'Very stable ' + kw('throughput') + ' (' + kw('CV') + '=' + (rpsCV*100).toFixed(0) + '%) â€” the server handles this load consistently.';
  else if (rpsCV < 0.5) tpHtml += 'Moderate variation (' + kw('CV') + '=' + (rpsCV*100).toFixed(0) + '%) â€” some fluctuation, likely from varying ' + kw('concurrency') + ' or upstream jitter.';
  else tpHtml += 'High variation (' + kw('CV') + '=' + (rpsCV*100).toFixed(0) + '%) â€” ' + kw('throughput') + ' is unstable. Check for queueing, GC pauses, or rate limiting.';
  tpHtml += '</div>';
  if (D.totalErrors > 0) {
    tpHtml += '<div class="insight bad">' + kw('error rate', 'Error rate') + ': ' + (D.totalErrors/D.totalRequests*100).toFixed(1) + '%. Check if errors cluster at specific times (transient) or spread evenly (systematic).</div>';
  }
  tpHtml += '<div class="how-to">Each bar = 1 second window. Drag to zoom, double-click to reset.</div>';
  document.getElementById('help-throughput').innerHTML = tpHtml;

  // Latency over time insights
  const p99p50ratio = D.overallP99 / Math.max(D.overallP50, 1);
  const latRange = D.overallMax - D.overallMin;

  let ltHtml = '<span class="title">Latency over time</span>';
  ltHtml += '<div class="legend">';
  ltHtml += legendItem('latency-time', 0, '#58a6ff', 'requests');
  ltHtml += legendItem('latency-time', 1, '#3fb950', 'p50');
  ltHtml += legendItem('latency-time', 2, '#d29922', 'p95');
  ltHtml += legendItem('latency-time', 3, '#da3633', 'p99');
  ltHtml += '</div>';

  ltHtml += '<div class="insight ' + (p99p50ratio < 2 ? 'good' : p99p50ratio < 5 ? 'warn' : 'bad') + '">';
  ltHtml += kw('p50') + '=' + D.overallP50.toFixed(0) + 'ms, ' + kw('p99') + '=' + D.overallP99.toFixed(0) + 'ms (ratio: ' + p99p50ratio.toFixed(1) + 'x). ';
  if (p99p50ratio < 2) ltHtml += 'Tight tail â€” most requests complete near the ' + kw('median') + '. Predictable performance.';
  else if (p99p50ratio < 5) ltHtml += 'Noticeable ' + kw('tail latency') + ' â€” 1% of requests are ' + p99p50ratio.toFixed(1) + 'x slower than ' + kw('median') + '. Typical under load.';
  else ltHtml += 'Very long ' + kw('tail latency') + ' â€” 1% of requests are ' + p99p50ratio.toFixed(1) + 'x slower than ' + kw('median') + '. Investigate outliers for timeouts, retries, or cold paths.';
  ltHtml += '</div>';

  // Check for latency trend
  if (D.windows.length >= 4) {
    const firstQuarter = D.windows.slice(0, Math.floor(D.windows.length/4));
    const lastQuarter = D.windows.slice(Math.floor(D.windows.length*3/4));
    const firstP50 = firstQuarter.reduce((s,w) => s+w.p50, 0) / firstQuarter.length;
    const lastP50 = lastQuarter.reduce((s,w) => s+w.p50, 0) / lastQuarter.length;
    const drift = (lastP50 - firstP50) / Math.max(firstP50, 1);
    const q1End = D.windows[Math.floor(D.windows.length/4)]?.t || 0;
    const q3Start = D.windows[Math.floor(D.windows.length*3/4)]?.t || 0;
    const lastT = D.windows[D.windows.length-1]?.t || 0;
    if (drift > 0.3) {
      ltHtml += '<div class="insight warn" data-highlight="latency-time" data-traces="1" data-region-start="' + q3Start + '" data-region-end="' + lastT + '" data-compare-start="0" data-compare-end="' + q1End + '">Latency drift: ' + kw('p50') + ' increased ' + (drift*100).toFixed(0) + '% from first to last quarter. Possible queueing buildup, memory pressure, or connection pool exhaustion.</div>';
    } else if (drift < -0.2) {
      ltHtml += '<div class="insight good" data-highlight="latency-time" data-traces="1" data-region-start="0" data-region-end="' + q1End + '" data-compare-start="' + q3Start + '" data-compare-end="' + lastT + '">Latency improved ' + (Math.abs(drift)*100).toFixed(0) + '% over the run â€” server warmed up (JIT, caches, connection reuse).</div>';
    }
  }
  // Anomalies inline
  if (D.anomalies.length > 0) {
    ltHtml += '<div style="margin-top:8px"><strong style="color:var(--text-heading);font-size:12px">Anomalies (' + D.anomalies.length + ')</strong>';
    for (const a of D.anomalies.slice(0, 5)) {
      ltHtml += '<div class="insight warn" style="font-size:11px;padding:4px 8px;margin:3px 0" data-highlight="latency-time" data-traces="3" data-region-start="' + (a.t-2) + '" data-region-end="' + (a.t+2) + '">';
      ltHtml += '<strong>t=' + a.t.toFixed(0) + 's</strong> ' + kw('p99') + '=' + a.latencyMs.toFixed(0) + 'ms (' + (a.latencyMs / a.rollingMean).toFixed(1) + 'x ' + kw('rolling mean') + ')';
      ltHtml += '</div>';
    }
    if (D.anomalies.length > 5) ltHtml += '<div style="font-size:11px;color:var(--text-faint)">...and ' + (D.anomalies.length - 5) + ' more</div>';
    ltHtml += '</div>';
  }
  ltHtml += '<div class="how-to">Drag to zoom into a region. Double-click to reset.</div>';
  document.getElementById('help-latency-time').innerHTML = ltHtml;

  // Histogram insights
  const allLat = D.events.map(e => e.latencyMs).sort((a,b) => a-b);
  const iqr = pct(allLat, 0.75) - pct(allLat, 0.25);
  const skew = (D.overallMean - D.overallP50) / Math.max(iqr, 1);

  let hHtml = '<span class="title">Latency distribution</span>';
  hHtml += '<div class="insight ' + (Math.abs(skew) < 0.5 ? 'good' : 'warn') + '">';
  hHtml += 'Range: ' + D.overallMin.toFixed(0) + 'â€“' + D.overallMax.toFixed(0) + 'ms. ' + kw('IQR', 'IQR (middle 50%)') + ': ' + iqr.toFixed(0) + 'ms. ';
  if (Math.abs(skew) < 0.3) hHtml += 'Symmetric distribution â€” consistent latency across requests.';
  else if (skew > 0) hHtml += 'Right-skewed (mean > ' + kw('median') + ' by ' + (D.overallMean - D.overallP50).toFixed(0) + 'ms) â€” a minority of requests are significantly slower, pulling the mean up.';
  else hHtml += 'Left-skewed â€” unusual, most requests are slower than the ' + kw('median') + ' cluster.';
  hHtml += '</div>';
  document.getElementById('help-latency-hist').innerHTML = hHtml;

  // Box plot insights
  let bHtml = '<span class="title">Latency by method</span>';
  if (D.methods.length === 1) {
    bHtml += '<div class="insight">Single method (' + D.methods[0] + '). Box shows p25â€“p75, line = median, whiskers = p5â€“p95.</div>';
  } else {
    bHtml += '<div class="insight">Comparing ' + D.methods.length + ' methods. Look for boxes at different heights â€” that tells you which operations are inherently slower.</div>';
  }
  document.getElementById('help-latency-box').innerHTML = bHtml;

  // Concurrency chart insights
  if (D.hasConcurrency && document.getElementById('help-concurrency')) {
    let cHtml = '<span class="title">Concurrency vs Throughput vs Latency</span>';
    cHtml += '<div class="legend">';
    cHtml += legendItem('concurrency', 0, '#238636', 'throughput (req/s)');
    cHtml += legendItem('concurrency', 1, '#bc8cff', 'concurrency');
    cHtml += legendItem('concurrency', 2, '#d29922', 'p50 latency');
    cHtml += '</div>';

    // Find the peak throughput window and its concurrency
    const peakWindow = D.windows.reduce((best, w) => w.count > best.count ? w : best, D.windows[0]);
    cHtml += '<div class="insight">Peak ' + kw('throughput') + ': <strong>' + peakWindow.count + ' ' + kw('req/s') + '</strong> at ' + kw('concurrency') + ' <strong>' + (peakWindow.concurrency || '?') + '</strong> (t=' + peakWindow.t.toFixed(0) + 's). ';

    // Check if there's a plateau pattern
    if (D.concChanges.length >= 2) {
      const lastChange = D.concChanges[D.concChanges.length - 1];
      const prevChange = D.concChanges[D.concChanges.length - 2];
      const windowsAtLast = D.windows.filter(w => w.concurrency === lastChange.to);
      const windowsAtPrev = D.windows.filter(w => w.concurrency === prevChange.to);
      if (windowsAtLast.length && windowsAtPrev.length) {
        const rpsLast = windowsAtLast.reduce((s,w) => s+w.count, 0) / windowsAtLast.length;
        const rpsPrev = windowsAtPrev.reduce((s,w) => s+w.count, 0) / windowsAtPrev.length;
        const latLast = windowsAtLast.reduce((s,w) => s+w.p50, 0) / windowsAtLast.length;
        const latPrev = windowsAtPrev.reduce((s,w) => s+w.p50, 0) / windowsAtPrev.length;
        if (rpsLast <= rpsPrev * 1.1 && latLast > latPrev * 1.2) {
          cHtml += 'At c=' + lastChange.to + ', ' + kw('throughput') + ' plateaued while latency jumped â€” <strong>' + kw('saturation') + ' point is around c=' + prevChange.to + '</strong>.';
        } else {
          cHtml += 'Throughput was still scaling at c=' + lastChange.to + '.';
        }
      }
    }
    cHtml += '</div>';
    cHtml += '<div class="how-to">Three y-axes: left = req/s, right = concurrency + latency.</div>';
    document.getElementById('help-concurrency').innerHTML = cHtml;
  }
}
</script>
</body>
</html>